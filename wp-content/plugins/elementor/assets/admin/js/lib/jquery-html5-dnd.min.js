!function(t){var n=function(t){try{return t.originalEvent.dataTransfer.setData("test","test"),t.originalEvent.dataTransfer.clearData("test"),!0}catch(n){return!1}},e=function(e){var r=this,i={},o={},a={element:"",groups:null,onDragStart:null},l=function(){s(),u(),f(),c()},s=function(){t.extend(!0,i,a,e)},u=function(){o.$element=t(i.element)},f=function(){o.$element.attr("draggable",!0)},c=function(){o.$element.on("dragstart",g)},g=function(e){var a=i.groups||[],l={groups:a};n(e)&&e.originalEvent.dataTransfer.setData(JSON.stringify(l),!0),t.isFunction(i.onDragStart)&&i.onDragStart.call(o.$element,e,r)};this.destroy=function(){o.$element.off("dragstart",g),o.$element.removeAttr("draggable")},l()},r=function(e){var r=this,i={},o={},a={element:"",items:">",horizontalSensitivity:"10%",axis:["vertical","horizontal"],groups:null,isDroppingAllowed:null,onDragging:null,onDropping:null,onDragLeave:null},l=function(){s(),u(),f()},s=function(){t.extend(i,a,e)},u=function(){o.$element=t(i.element)},f=function(){o.$element.on("dragover",i.items,p),o.$element.on("drop",i.items,m),o.$element.on("dragleave drop",i.items,D)},c=function(t,n){if(!g())return!1;if(!v())return t>n/2?"right":"left";var e=i.horizontalSensitivity.match(/\d+/);if(!e)return!1;e=e[0];var r=/%$/.test(i.horizontalSensitivity);return r&&(e=n/e),t>n-e?"right":e>t?"left":!1},g=function(){return-1!==i.axis.indexOf("horizontal")},v=function(){return-1!==i.axis.indexOf("vertical")},d=function(n,e){e=e.originalEvent;var r,i=t(n),o=i.outerHeight(),a=i.outerWidth();return(r=c(e.offsetX,a))?r:v()?r=e.offsetY>o/2?"bottom":"top":!1},h=function(e,o,a){if(i.groups&&n(a)){var l,s=a.originalEvent.dataTransfer.types,u=!1;if(s=Array.prototype.slice.apply(s),s.forEach(function(t){try{if(l=JSON.parse(t),!l.groups.slice)return;i.groups.forEach(function(t){return-1!==l.groups.indexOf(t)?(u=!0,!1):void 0})}catch(n){}}),!u)return!1}if(t.isFunction(i.isDroppingAllowed)){var f=i.isDroppingAllowed.call(e,o,a,r);if(!f)return!1}return!0},p=function(n){var e=d(this,n);h(this,e,n)&&(n.preventDefault(),t.isFunction(i.onDragging)&&i.onDragging.call(this,e,n,r))},m=function(n){var e=d(this,n);h(this,e,n)&&(n.preventDefault(),t.isFunction(i.onDropping)&&i.onDropping.call(this,e,n,r))},D=function(n){t.isFunction(i.onDragLeave)&&i.onDragLeave.call(this,n,r)};this.destroy=function(){o.$element.off("dragover",i.items,p),o.$element.off("drop",i.items,m),o.$element.off("dragleave drop",i.items,D)},l()},i={html5Draggable:e,html5Droppable:r};t.each(i,function(n,e){t.fn[n]=function(r){return r=r||{},this.each(function(){var i=t.data(this,n),o=i instanceof e;return o?void("destroy"===r&&(i.destroy(),t.removeData(this,n))):(r.element=this,void t.data(this,n,new e(r)))}),this}})}(jQuery);